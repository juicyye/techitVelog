<!DOCTYPE html>
<html th:replace="~{/layout/header :: header(~{::title},~{::section})}" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>블로그</title>

</head>
<body>
<section class="container mt-4">

    <li class="nav-item" th:if="${param.update}">
        <span>수정성공</span>
    </li>
    <div class="card p-4">

        <div class="mb-3 flex-div">
            <h3 class="card-title"><span th:text="${post.title}"></span></h3>
            <p th:text="${#temporals.format(post.createDate,'yyyy-MM-dd')}" class="date-class"></p>
            <div sec:authorize="isAuthenticated()" class="post-title-secret">
                    <span  th:if="${post.loginId == #authentication.principal.username and post.isSecret == T(techit.velog.domain.post.entity.IsSecret).SECRET}"
                           class="whitespace-nowrap rounded-full bg-purple-100 px-2.5 py-0.5 text-sm text-purple-700">비공개
                    </span>
            </div>

        </div>
        <hr>

        <div class="flex-div">
            <a href="" th:href="@{|/${post.blogName}|}" th:text="${post.blogName}" class="anker"></a>
            <p class="card-text">조회수: <span th:text="${post.views}"></span></p>
            <p class="card-text">추천수: <span th:text="${post.likes}"></span></p>

        </div>
        <hr>

        <div class="mb-3">
            <h3 class="card-text"><span th:text="${post.content}"></span></h3>
        </div>
        <div th:each="image : ${post.postImages}">
            <img th:src="|/images/${image.getStoreFileName()}|" width="300" height="200"/>
        </div>

        <div class="flex-div-button" sec:authorize="isAuthenticated()">
            <button th:onclick="|location.href='@{|/like/${post.blogName}/${post.postId}|}'|"
                    class="btn btn-primary mb-3 btn-sm button-recommend">
                추천
            </button>
            <button class="btn btn-info btn-sm mb-3"
                    th:onclick="|location.href='@{|/${post.blogName}/${post.title}/postModify/${post.postId}|}'|">수정
            </button>
            <form th:action="@{|/${post.blogName}/postDelete/${post.postId}|}" method="post"
                  onsubmit="return confirm('정말로 삭제하시겠습니까?');">
                <button type="submit" class="btn btn-danger btn-sm">삭제</button>
            </form>
        </div>


    </div>

    <div class="mb-4">
        <ul class="list-group list-unstyled">
            <div th:each="comment : ${comments}">
                <div th:replace="~{comment/comments :: commentTemplate(${comment},${post})}"></div>
            </div>
        </ul>
    </div>

    <div class="mb-3">
        <form action="" th:action="@{|/${post.blogName}/${post.title}/comment|}" method="post" class="form-inline">
            <div class="form-group mr-2">
                <label for="content" class="sr-only">댓글</label>
                <input type="hidden" name="postId" th:value="${post.postId}">
                <input type="text" id="content" name="content" class="form-control" placeholder="댓글을 입력하세요">
            </div>
            <button type="submit" class="btn btn-secondary">댓글</button>
        </form>
    </div>

</section>

</body>
</html>
